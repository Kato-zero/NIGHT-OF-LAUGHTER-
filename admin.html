<!DOCTYPE html>
<html>
<head>
    <title>Event Manager - Night of Laughter</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; }
        h1 { color: #333; }
        .section { border: 1px solid #ddd; padding: 20px; margin: 20px 0; border-radius: 8px; }
        input, textarea, select { width: 100%; padding: 10px; margin: 5px 0 15px 0; border: 1px solid #ccc; border-radius: 4px; }
        button { background: #007bff; color: white; padding: 12px 20px; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background: #f5f5f5; }
        .delete-btn { background: #dc3545; padding: 5px 10px; color: white; border: none; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>Night of Laughter - Event Manager</h1>
    
    <div class="section">
        <h2>Add New Event</h2>
        <form id="addEventForm">
            <label>Event Name:</label>
            <input type="text" id="eventName" placeholder="e.g., Comedy Night March" required>
            
            <label>Date:</label>
            <input type="date" id="eventDate" required>
            
            <label>Time:</label>
            <input type="text" id="eventTime" placeholder="e.g., 19:00" required>
            
            <label>Venue:</label>
            <input type="text" id="eventVenue" placeholder="e.g., Lusaka Playhouse" required>
            
            <label>Image URL:</label>
            <input type="url" id="eventImage" placeholder="https://i.postimg.cc/...">
            
            <label>Type:</label>
            <select id="eventType">
                <option value="featured">Featured</option>
                <option value="upcoming">Upcoming</option>
            </select>
            
            <label>VIP Single Price (K):</label>
            <input type="number" id="vipSingle" placeholder="500" required>
            
            <label>VIP Double Price (K):</label>
            <input type="number" id="vipDouble" placeholder="800" required>
            
            <label>Ordinary Single Price (K):</label>
            <input type="number" id="ordinarySingle" placeholder="300" required>
            
            <label>Ordinary Double Price (K):</label>
            <input type="number" id="ordinaryDouble" placeholder="500" required>
            
            <label>Description:</label>
            <textarea id="eventDescription" rows="3" placeholder="Event description..."></textarea>
            
            <label>Status:</label>
            <select id="eventStatus">
                <option value="active">Active (Show on website)</option>
                <option value="inactive">Inactive (Hide from website)</option>
            </select>
            
            <button type="submit">Add Event</button>
        </form>
    </div>
    
    <div class="section">
        <h2>Current Events</h2>
        <div id="eventsList">
            <p>Loading events...</p>
        </div>
    </div>
    
    <script>
        // Function to load events from Google Sheets
        async function loadEvents() {
            try {
                const response = await fetch('/api/events');
                const events = await response.json();
                
                let html = '<table>';
                html += '<tr><th>Name</th><th>Date</th><th>Type</th><th>Status</th><th>Action</th></tr>';
                
                events.forEach(event => {
                    html += `<tr>
                        <td>${event.name}</td>
                        <td>${event.date}</td>
                        <td>${event.type}</td>
                        <td>${event.desc ? 'Active' : 'Inactive'}</td>
                        <td><button class="delete-btn" onclick="deleteEvent('${event.name}')">Delete</button></td>
                    </tr>`;
                });
                
                html += '</table>';
                document.getElementById('eventsList').innerHTML = html;
                
            } catch (error) {
                document.getElementById('eventsList').innerHTML = 
                    '<p style="color:red">Error loading events. Please check Google Sheets setup.</p>';
            }
        }
        
        // Function to add new event (you'll edit Google Sheet manually)
        document.getElementById('addEventForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const eventData = {
                Name: document.getElementById('eventName').value,
                Date: document.getElementById('eventDate').value,
                Time: document.getElementById('eventTime').value,
                Venue: document.getElementById('eventVenue').value,
                Image: document.getElementById('eventImage').value || '',
                Type: document.getElementById('eventType').value,
                'VIP Single': document.getElementById('vipSingle').value,
                'VIP Double': document.getElementById('vipDouble').value,
                'Ordinary Single': document.getElementById('ordinarySingle').value,
                'Ordinary Double': document.getElementById('ordinaryDouble').value,
                Description: document.getElementById('eventDescription').value,
                Status: document.getElementById('eventStatus').value
            };
            
            alert('To add this event:\n\n1. Open your Google Sheets "Events" sheet\n2. Add a new row with this data\n3. Save the sheet\n\nYour website will update automatically!');
            
            // Reset form
            this.reset();
            loadEvents();
        });
        
        function deleteEvent(eventName) {
            if (confirm(`Delete "${eventName}"?\n\nNote: In Google Sheets, change Status to "inactive" instead of deleting.`)) {
                alert('In Google Sheets:\n1. Find the event\n2. Change Status column to "inactive"\n3. Save\n\nEvent will be hidden from website.');
                loadEvents();
            }
        }
        
        // Load events when page loads
        loadEvents();
    </script>
</body>
                </html>
